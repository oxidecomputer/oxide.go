// Code generated by `generate.test`. DO NOT EDIT.

// This Source Code Form is subject to the terms of the Mozilla Public
// License, v. 2.0. If a copy of the MPL was not distributed with this
// file, You can obtain one at https://mozilla.org/MPL/2.0/.

package oxide

// DiskCreate is the type definition for a DiskCreate.
type DiskCreate struct {
	DiskSource DiskSource `json:"disk_source,omitzero" yaml:"disk_source,omitzero"`
}
// DiskIdentifier is parameters for the [`Disk`](omicron_common::api::external::Disk) to be attached or
// detached to an instance
type DiskIdentifier struct {
	Name Name `json:"name,omitzero" yaml:"name,omitzero"`
}
// DiskSourceType is the type definition for a DiskSourceType.
type DiskSourceType string
// DiskSource is the type definition for a DiskSource.
type DiskSource struct {
	Type DiskSourceType `json:"type" yaml:"type"`
	SnapshotId string `json:"snapshot_id,omitempty" yaml:"snapshot_id,omitempty"`
	ImageId string `json:"image_id,omitempty" yaml:"image_id,omitempty"`
}
// fieldValueVariant is an interface for FieldValue variants.
type fieldValueVariant interface {
	isFieldValueVariant()
}
// FieldValueType is the type definition for a FieldValueType.
type FieldValueType string
// FieldValueString is the type definition for a FieldValueString.
type FieldValueString struct {
	Value string `json:"value,omitempty" yaml:"value,omitempty"`
}
func (FieldValueString) isFieldValueVariant() {}

// FieldValueInt is the type definition for a FieldValueInt.
type FieldValueInt struct {
	Value *int `json:"value,omitempty" yaml:"value,omitempty"`
}
func (FieldValueInt) isFieldValueVariant() {}

// FieldValueBool is the type definition for a FieldValueBool.
type FieldValueBool struct {
	Value *bool `json:"value,omitempty" yaml:"value,omitempty"`
}
func (FieldValueBool) isFieldValueVariant() {}

// FieldValue is the `FieldValue` contains the value of a target or metric field.
type FieldValue struct {
	Value fieldValueVariant `json:"value,omitzero" yaml:"value,omitzero"`
}
// UnmarshalJSON implements json.Unmarshaler for FieldValue, selecting the correct
// variant of the Value field based on the type discriminator.
func (v *FieldValue) UnmarshalJSON(data []byte) error {
	var raw struct {
		Type  FieldValueType  `json:"type"`
		Value json.RawMessage `json:"value"`
	}
	if err := json.Unmarshal(data, &raw); err != nil {
		return fmt.Errorf("unmarshaling FieldValue: %w\nJSON: %s", err, string(data))
	}
	switch raw.Type {
	case FieldValueTypeString:
		var val FieldValueString
		if err := json.Unmarshal(data, &val); err != nil {
			return fmt.Errorf("unmarshaling FieldValue variant FieldValueString: %w\nJSON: %s", err, string(data))
		}
		v.Value = val
	case FieldValueTypeInt:
		var val FieldValueInt
		if err := json.Unmarshal(data, &val); err != nil {
			return fmt.Errorf("unmarshaling FieldValue variant FieldValueInt: %w\nJSON: %s", err, string(data))
		}
		v.Value = val
	case FieldValueTypeBool:
		var val FieldValueBool
		if err := json.Unmarshal(data, &val); err != nil {
			return fmt.Errorf("unmarshaling FieldValue variant FieldValueBool: %w\nJSON: %s", err, string(data))
		}
		v.Value = val
	}
	return nil
}

// MarshalJSON implements json.Marshaler for FieldValue, setting the type
// discriminator based on the Value variant type.
func (v FieldValue) MarshalJSON() ([]byte, error) {
	var discriminator FieldValueType
	var innerValue any
	switch val := v.Value.(type) {
	case FieldValueString:
		discriminator = FieldValueTypeString
		innerValue = val.Value
	case FieldValueInt:
		discriminator = FieldValueTypeInt
		innerValue = val.Value
	case FieldValueBool:
		discriminator = FieldValueTypeBool
		innerValue = val.Value
	}
	return json.Marshal(struct {
		Type FieldValueType `json:"type"`
		Value any `json:"value,omitzero"`
	}{
		Type: discriminator,
		Value: innerValue,
	})
}

// DiskSourceTypeSnapshot represents the DiskSourceType `"snapshot"`.
const DiskSourceTypeSnapshot DiskSourceType = "snapshot"

// DiskSourceTypeImage represents the DiskSourceType `"image"`.
const DiskSourceTypeImage DiskSourceType = "image"

// FieldValueTypeString represents the FieldValueType `"string"`.
const FieldValueTypeString FieldValueType = "string"

// FieldValueTypeInt represents the FieldValueType `"int"`.
const FieldValueTypeInt FieldValueType = "int"

// FieldValueTypeBool represents the FieldValueType `"bool"`.
const FieldValueTypeBool FieldValueType = "bool"

// DiskSourceTypeCollection is the collection of all DiskSourceType values.
var DiskSourceTypeCollection = []DiskSourceType{
	DiskSourceTypeImage,
	DiskSourceTypeSnapshot,
}

// FieldValueTypeCollection is the collection of all FieldValueType values.
var FieldValueTypeCollection = []FieldValueType{
	FieldValueTypeBool,
	FieldValueTypeInt,
	FieldValueTypeString,
}

